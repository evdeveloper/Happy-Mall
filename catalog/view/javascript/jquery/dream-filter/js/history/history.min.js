!function(e){if("function"==typeof define&&define.amd){if("undefined"!=typeof requirejs){var t=requirejs,n="[history"+(new Date).getTime()+"]",r=t.onError;e.toString=function(){return n},t.onError=function(e){-1===e.message.indexOf(n)&&r.call(t,e)}}define([],e)}if("object"!=typeof exports||"undefined"==typeof module)return e();module.exports=e()}(function(){function e(){}function t(e,n,r){if(null==e||""===e||n)e=n?e:m.href,S&&!r||(e=e.replace(/^[^#]*/,"")||"#",e=m.protocol.replace(/:.*$|$/,":")+"//"+m.host+B.basepath+e.replace(new RegExp("^#[/]?(?:"+B.type+")?"),""));else{var i=t(),a=v.getElementsByTagName("base")[0];!r&&a&&a.getAttribute("href")&&(a.href=a.href,i=t(a.href,null,!0));var o=i._pathname,c=i._protocol;e=/^(?:\w+\:)?\/\//.test(e=""+e)?0===e.indexOf("/")?c+e:e:c+"//"+i._host+(0===e.indexOf("/")?e:0===e.indexOf("?")?o+e:0===e.indexOf("#")?o+i._search+e:o.replace(/[^\/]+$/g,"")+e)}D.href=e;var f=/(?:([a-zA-Z0-9\-]+\:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/.exec(D.href),l=f[2]+(f[3]?":"+f[3]:""),s=f[4]||"/",u=f[5]||"",p="#"===f[6]?"":f[6]||"",h=s+u+p,d=s.replace(new RegExp("^"+B.basepath,"i"),B.type)+u;return{_href:f[1]+"//"+l+h,_protocol:f[1],_host:l,_hostname:f[2],_port:f[3]||"",_pathname:s,_search:u,_hash:p,_relative:h,_nohash:d,_special:d+p}}function n(e){return e&&h&&h.EventTarget&&"function"==typeof h.EventTarget.prototype.addEventListener&&"function"==typeof e.bind?e.bind(h):e}function r(t,n,r,i){var a=0;r||(r={set:e},a=1);var o=!r.set,c=!r.get,f={configurable:!0,set:function(){o=1},get:function(){c=1}};try{T(t,n,f),t[n]=t[n],T(t,n,r)}catch(e){}if(!(o&&c||(t.__defineGetter__&&(t.__defineGetter__(n,f.get),t.__defineSetter__(n,f.set),t[n]=t[n],r.get&&t.__defineGetter__(n,r.get),r.set&&t.__defineSetter__(n,r.set)),o&&c))){if(a)return!1;if(t===h){try{var l=t[n];t[n]=null}catch(e){}if("execScript"in h)h.execScript("Public "+n,"VBScript"),h.execScript("var "+n+";","JavaScript");else try{T(t,n,{value:e})}catch(e){"onpopstate"===n&&(I("popstate",r=function(){P("popstate",r,!1);var e=t.onpopstate;t.onpopstate=null,setTimeout(function(){t.onpopstate=e},1)},!1),V=0)}t[n]=l}else try{try{var s=_.create(t);T(_.getPrototypeOf(s)===t?s:t,n,r);for(var u in t)"function"==typeof t[u]&&(s[u]=t[u].bind(t));try{i.call(s,s,t)}catch(e){}t=s}catch(e){T(t.constructor.prototype,n,r)}}catch(e){return!1}}return t}function i(e,t,n){return n=n||{},e=e===H?m:e,n.set=n.set||function(n){e[t]=n},n.get=n.get||function(){return e[t]},n}function a(t,n){var i=(""+("string"==typeof t?t:t.type)).replace(/^on/,""),a=z[i];if(a){if(null==(n="string"==typeof t?n:t).target)for(var o=["target","currentTarget","srcElement","type"];t=o.pop();)n=r(n,t,{get:"type"===t?function(){return i}:function(){return h}});V&&(("popstate"===i?h.onpopstate:h.onhashchange)||e).call(h,n);for(var c=0,f=a.length;c<f;c++)a[c].call(h,n);return!0}return N(t,n)}function o(){var e=v.createEvent?v.createEvent("Event"):v.createEventObject();e.initEvent?e.initEvent("popstate",!1,!1):e.type="popstate",e.state=x.state,a(e)}function c(e,n,r,i){if(S)G=m.href;else{0===C&&(C=2);var a=t(n,2===C&&-1!==(""+n).indexOf("#"));a._relative!==t()._relative&&(G=i,r?m.replace("#"+a._special):m.hash=a._special)}!w&&e&&(J[m.href]=e),q=!1}function f(e){var n=G;if(G=m.href,n){U!==m.href&&o(),e=e||h.event;var r=t(n,!0),i=t();e.oldURL||(e.oldURL=r._href,e.newURL=i._href),r._hash!==i._hash&&a(e)}}function l(e){setTimeout(function(){I("popstate",function(e){U=m.href,w||(e=r(e,"state",{get:function(){return x.state}})),a(e)},!1)},0),!S&&!0!==e&&"location"in x&&(u(A.hash),q&&(q=!1,o()))}function s(e){var n=e||h.event,r=function(e){for(;e;){if("A"===e.nodeName)return e;e=e.parentNode}}(n.target||n.srcElement),i="defaultPrevented"in n?n.defaultPrevented:!1===n.returnValue;if(r&&"A"===r.nodeName&&!i){var a=t(),o=t(r.getAttribute("href",2));a._href.split("#").shift()===o._href.split("#").shift()&&o._hash&&(a._hash!==o._hash&&(A.hash=o._hash),u(o._hash),n.preventDefault?n.preventDefault():n.returnValue=!1)}}function u(e){var t=v.getElementById(e=(e||"").replace(/^#/,""));if(t&&t.id===e&&"A"===t.nodeName){var n=t.getBoundingClientRect();h.scrollTo(g.scrollLeft||0,n.top+(g.scrollTop||0)-(g.clientTop||0))}}function p(){var e=v.getElementsByTagName("script"),n=(e[e.length-1]||{}).src||"";(-1!==n.indexOf("?")?n.split("?").pop():"").replace(/(\w+)(?:=([^&]*))?/g,function(e,t,n){B[t]=(n||"").replace(/^(0|false)$/,"")}),I(L+"hashchange",f,!1);var a=[H,A,W,h,F,x];w&&delete F.state;for(var o=0;o<a.length;o+=2)for(var c in a[o])if(a[o].hasOwnProperty(c))if("object"!=typeof a[o][c])a[o+1][c]=a[o][c];else{var u=i(a[o],c,a[o][c]);if(!r(a[o+1],c,u,function(e,t){t===x&&(h.history=x=a[o+1]=e)}))return P(L+"hashchange",f,!1),!1;a[o+1]===h&&(z[c]=z[c.substr(2)]=[])}return x.setup(),B.redirect&&x.redirect(),B.init&&(C=1),!w&&y&&function(){var e;try{(e=h.sessionStorage).setItem(k+"t","1"),e.removeItem(k+"t")}catch(t){e={getItem:function(e){var t=v.cookie.split(e+"=");return t.length>1&&t.pop().split(";").shift()||"null"},setItem:function(e,t){var n={};(n[m.href]=x.state)&&(v.cookie=e+"="+y.stringify(n))}}}try{J=y.parse(e.getItem(k))||{}}catch(e){J={}}I(L+"unload",function(){e.setItem(k,y.stringify(J))},!1)}(),S||v[R](L+"click",s,!1),"complete"===v.readyState?l(!0):(S||t()._relative===B.basepath||(q=!0),I(L+"load",l,!1)),!0}var h=("object"==typeof window?window:this)||{};if(!h.history||"emulate"in h.history)return h.history;var d,v=h.document,g=v.documentElement,_=h.Object,y=h.JSON,m=h.location,E=h.history,x=E,b=E.pushState,O=E.replaceState,S=function(){var e=h.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&!!b}(),w="state"in E,T=_.defineProperty,A=r({},"t")?{}:v.createElement("a"),L="",R=h.addEventListener?"addEventListener":(L="on")&&"attachEvent",$=h.removeEventListener?"removeEventListener":"detachEvent",j=h.dispatchEvent?"dispatchEvent":"fireEvent",I=n(h[R]),P=n(h[$]),N=n(h[j]),B={basepath:"/",redirect:0,type:"/",init:0},k="__historyAPI__",D=v.createElement("a"),G=m.href,U="",V=1,q=!1,C=0,J={},z={},M=v.title,W={onhashchange:null,onpopstate:null},Z=function(e,t){var n=h.history!==E;n&&(h.history=E),e.apply(E,t),n&&(h.history=x)},F={setup:function(e,t,n){B.basepath=(""+(null==e?B.basepath:e)).replace(/(?:^|\/)[^\/]*$/,"/"),B.type=null==t?B.type:t,B.redirect=null==n?B.redirect:!!n},redirect:function(e,n){if(x.setup(n,e),n=B.basepath,h.top==h.self){var r=t(null,!1,!0)._relative,i=m.pathname+m.search;S?(i=i.replace(/([^\/])$/,"$1/"),r!=n&&new RegExp("^"+n+"$","i").test(i)&&m.replace(r)):i!=n&&(i=i.replace(/([^\/])\?/,"$1/?"),new RegExp("^"+n,"i").test(i)&&m.replace(n+"#"+i.replace(new RegExp("^"+n,"i"),B.type)+m.hash))}},pushState:function(e,t,n){var r=v.title;null!=M&&(v.title=M),b&&Z(b,arguments),c(e,n),v.title=r,M=t},replaceState:function(e,t,n){var r=v.title;null!=M&&(v.title=M),delete J[m.href],O&&Z(O,arguments),c(e,n,!0),v.title=r,M=t},location:{set:function(e){0===C&&(C=1),h.location=e},get:function(){return 0===C&&(C=1),A}},state:{get:function(){return"object"==typeof J[m.href]?y.parse(y.stringify(J[m.href])):void 0!==J[m.href]?J[m.href]:null}}},H={assign:function(e){S||0!==(""+e).indexOf("#")?m.assign(e):c(null,e)},reload:function(e){m.reload(e)},replace:function(e){S||0!==(""+e).indexOf("#")?m.replace(e):c(null,e,!0)},toString:function(){return this.href},origin:{get:function(){return void 0!==d?d:m.origin?m.origin:m.protocol+"//"+m.hostname+(m.port?":"+m.port:"")},set:function(e){d=e}},href:S?null:{get:function(){return t()._href}},protocol:null,host:null,hostname:null,port:null,pathname:S?null:{get:function(){return t()._pathname}},search:S?null:{get:function(){return t()._search}},hash:S?null:{set:function(e){c(null,(""+e).replace(/^(#|)/,"#"),!1,G)},get:function(){return t()._hash}}};return p()?(x.emulate=!S,h[R]=function(e,t,n){e in z?z[e].push(t):arguments.length>3?I(e,t,n,arguments[3]):I(e,t,n)},h[$]=function(e,t,n){var r=z[e];if(r){for(var i=r.length;i--;)if(r[i]===t){r.splice(i,1);break}}else P(e,t,n)},h[j]=a,x):void 0});