!function(e){e.fn.dreamFilter=function(t){t=e.extend({search_mode:"auto",disable_null:"disable",show_count:!0,show_picked:!0,decodeURI:!0,loader:"",callbackBefore:!1,callbackAfter:!1,truncate:{mode:"none"},mobile:{mode:"none"},ajax:{enable:!1},popper:{enable:!1},filters:{}},t);var i,a,n,o,r,l,d=this,s=d.attr("action"),c=e("#"+t.widget_id),f=e("#"+t.popper.id),p=function(i,a){a=void 0===a||a;var n=e("#"+i),o=n.find("input[name], select[name]"),r=d.find('.rdf-picked [data-clear="'+i+'"]'),l=n.find('[data-clear="'+i+'"]');if(o.is(":checkbox")||o.is(":radio"))o.prop("checked",!1),o.removeAttr("checked");else{if(o.hasClass("irs-hidden-input")){var s=o.data("ionRangeSlider"),c=s.options.from_min?s.options.from_min:s.options.min,f=s.options.to_max?s.options.to_max:s.options.max;s.update({from:c,to:f}),e("#"+i+"-input-min").length&&e("#"+i+"-input-min").val("").attr({min:c,placeholder:c}),e("#"+i+"-input-max").length&&e("#"+i+"-input-max").val("").attr({max:f,placeholder:f})}o.val("")}a&&("auto"===t.search_mode?d.submit():t.popper.enable&&v(n.closest(".panel"))),r.remove(),l.remove()},u=function(){d.find("input[name], select[name]").each(function(t){var i=e(this);i.hasClass("irs-hidden-input")&&i.closest(".slidewrapper").hasClass("irs-notinit")&&i.val(""),i.val()||i.prop("disabled",!0)})},h=function(){d.find("input[name], select[name]").filter(":disabled").each(function(t){e(this).prop("disabled",!1)})};d.on("submit",function(i){i.preventDefault(),u(),m();var a=e(this).serialize(),n=s+(a?(s.indexOf("?")>0?"&":"?")+a:"");t.ajax.enable?(j(n,!0,!0),h(),"fixed"===t.mobile.mode&&t.mobile.autoclose&&c.hasClass("show")&&e("#"+t.mobile.button_id).trigger("click")):window.location.href=n}),d.on("reset",function(t){t.preventDefault(),d.find(".rdf-filters input, .rdf-filters select").each(function(t){p(e(this).data("id"),!1)}),d.submit()}),d.on("click","[data-clear]",function(){p(e(this).data("clear"))}),d.on("change","input:checkbox, input:radio",function(){var t=e(this).data("id");e(this).is(":radio")&&e(this).closest(".rdf-group").find("[data-clear]").remove(),e(this).is(":checked")?e("#"+t).find(".rdf-label").before('<span class="rdf-clear" data-clear="'+t+'">&times;</span>'):e("#"+t).find(".rdf-clear").remove()}),d.on("change","select[name], input[name]:text",function(){var t=e(this).data("id");e(this).val()?e(this).closest(".input-group").find("[data-clear]").length||e(this).closest(".input-group").append('<span class="rdf-clear input-group-addon" data-clear="'+t+'">&times;</span>'):e(this).closest(".input-group").find(".rdf-clear").remove()}),"auto"===t.search_mode&&(d.on("change","input[name]:not([type=hidden]), select",function(){d.submit()}),d.on("finish","input.irs-hidden-input",function(){d.submit()}));var m=function(){i&&f.fadeOut(200,function(){i.destroy()})},v=function(a){var n=a.offset().top+a.outerHeight()/2-f.outerHeight()/2-d.offset().top;u(),e.ajax({url:t.popper.action.replace(/&amp;/g,"&"),type:"get",data:d.serialize(),processData:!1,dataType:"html",beforeSend:function(){"function"==typeof e.fn.button&&e("#"+t.popper.button_id).button("loading")},success:function(e){f.find("span").html(e),function(e){e=e||0,setTimeout(function(){i=new Popper(d,f,{placement:"right-start",modifiers:{offset:{offset:e},computeStyle:{gpuAcceleration:!1},preventOverflow:{enabled:!0,boundariesElement:"viewport"}}}),f.fadeIn(200)},200)}(n)},complete:function(){"function"==typeof e.fn.button&&e("#"+t.popper.button_id).button("reset")}}),h()};t.popper.enable&&(d.on("change","input[name]:not([type=hidden]), select",function(){v(e(this).closest(".panel"))}),d.on("finish","input.irs-hidden-input",function(){v(e(this).closest(".panel"))}),e(document).on("click","#"+t.popper.button_id,function(){d.submit(),m()}),e(document).mouseup(function(e){f.is(e.target)||0!==f.has(e.target).length||m()}));var b=function(){switch(t.truncate.mode){case"element":d.find(".rdf-truncate-element .rdf-group").each(function(i){var a=e(this);a.children().filter(":visible").length>t.truncate.elements?(a.css("padding-bottom",0),a.parent().removeClass("rdf-full"),a.parent().hasClass("rdf-show")?x(e(this),0):g(e(this),0)):(a.parent().addClass("rdf-full"),a.css({height:"","padding-bottom":""})),a.css("max-height","none").show()});break;case"height":d.find(".rdf-truncate-height").each(function(i){e(this).outerHeight()===parseInt(t.truncate.height)&&(t.truncate.scrollbar?e(this).hasClass("scroll-wrapper")||e(this).scrollbar():e(this).find(".rdf-group").css("padding-right",0))});break;case"width":t.truncate.scrollbar&&d.find(".rdf-truncate-width").each(function(t){e(this).hasClass("scroll-wrapper")||e(this).scrollbar()})}},g=function(i,a){a=void 0===a?400:a;var n=0;i.children().filter(":visible").each(function(i){i<t.truncate.elements&&(n+=e(this).outerHeight(!0))}),i.animate({height:n+"px"},a),i.parent().removeClass("rdf-show")},x=function(t,i){i=void 0===i?400:i;var a=0;t.children().filter(":visible").each(function(t){a+=e(this).outerHeight(!0)}),t.animate({height:a+"px"},i,function(){t.height("")}),t.parent().addClass("rdf-show")};d.on("click",'[data-toggle="truncate-show"]',function(){x(e(e(this).data("target")))}),d.on("click",'[data-toggle="truncate-hide"]',function(){g(e(e(this).data("target")))}),d.on("shown.bs.collapse",".panel-collapse",function(){b()});var w=function(){switch(t.mobile.mode){case"button":"mobile"!==!c.data("view")&&(c.before('<div id="rdf-dummy"></div>'),c.detach().prependTo(t.ajax.selector),c.data("view","mobile")),d.hasClass("collapse")||d.addClass("collapse");break;case"fixed":c.hasClass("rdf-mobile-view")||(c.before('<div id="rdf-dummy"></div>'),c.detach().prependTo("body"),c.addClass("rdf-mobile-view"),c.css("top",t.mobile.indenting_top+"px"),c.css(t.mobile.side,"-255px")),e("#"+t.mobile.button_id).css("top",t.mobile.indenting_button+"px");var i=e(window).height()-t.mobile.indenting_top-t.mobile.indenting_bottom;d.css("max-height",i+"px");var a=d.height();d.find(".rdf-header").length&&(a-=d.find(".rdf-header").outerHeight()),d.find(".rdf-footer").length&&(a-=d.find(".rdf-footer").outerHeight()),d.find(".rdf-body").css("max-height",a+"px"),d.find(".rdf-filters").scrollbar()}};"none"!==t.mobile.mode&&e(window).on("resize",function(){window.matchMedia("(max-width: "+t.mobile.width+"px)").matches?w():function(){switch(t.mobile.mode){case"button":"mobile"===c.data("view")&&(e("#rdf-dummy").after(c.detach()).remove(),c.data("view","desktop")),d.hasClass("collapse")&&d.removeClass("collapse"),d.css("height","auto");break;case"fixed":c.hasClass("rdf-mobile-view")&&(c.removeClass("rdf-mobile-view"),e("#rdf-dummy").after(c.detach()).remove(),d.attr("style",""),d.find(".rdf-body").attr("style","")),c.removeClass("show"),e("div.rdr-backdrop").remove()}}()}),"fixed"===t.mobile.mode&&e(document).on("click","#"+t.mobile.button_id+", .rdr-backdrop",function(){c.toggleClass("show"),c.hasClass("show")?(t.mobile.backdrop&&e("<div>",{class:"rdr-backdrop"}).appendTo("body").fadeTo("swing",.7),"right"===t.mobile.side?c.animate({right:0}):c.animate({left:0})):(t.mobile.backdrop&&e("div.rdr-backdrop").fadeOut(function(){e(this).remove()}),"right"===t.mobile.side?c.animate({right:"-255px"}):c.animate({left:"-255px"}))}),"button"===t.mobile.mode&&e(document).on("click","#"+t.mobile.button_id,function(){d.collapse("toggle")});var _=function(){t.ajax.sorter&&"select"===t.ajax.sorter_type&&e(t.ajax.sorter).removeAttr("onchange"),t.ajax.limit&&"select"===t.ajax.limit_type&&e(t.ajax.limit).removeAttr("onchange"),e(t.ajax.selector).addClass("rdf-container");try{var i=!1;if(e.cookie?i=e.cookie("display"):e.totalStorage&&(i=e.totalStorage("display")),i&&"function"==typeof display)display(i);else switch(i=localStorage.getItem("display")){case"list":"function"==typeof list_view?list_view():e("#list-view").trigger("click");break;case"compact":"function"==typeof compact_view?compact_view():e("#compact-view").trigger("click");break;case"price":"function"==typeof price_view?price_view():e("#price-view").trigger("click");break;case"grid4":"function"==typeof grid_view4?grid_view4():e("#grid-view4").trigger("click");break;default:"function"==typeof grid_view?grid_view():e("#grid-view").trigger("click")}}catch(e){console.error("Display error "+e.name+":"+e.message+"\n"+e.stack)}},j=function(i,s,f){"https:"===window.location.protocol&&(i=i.replace(/^http:\/\//g,"https://"));var p=i;p+=(p.indexOf("?")>0?"&":"?")+"rdf-ajax=1",f&&"leave"!==t.disable_null?p+="&rdf-reload=1&rdf-module="+t.module:f=!1,t.decodeURI&&(i=decodeURIComponent(i)),t.callbackBefore&&"function"==typeof t.callbackBefore&&t.callbackBefore(i),e.ajax({url:p,type:"get",processData:!1,dataType:f?"json":"html",beforeSend:function(){"function"==typeof e.fn.button&&d.find(".rdf-footer button").button("loading"),e(t.ajax.selector).addClass("rdf-loading"),e("#grid-view").length&&(a=e("#grid-view").clone(!0)),e("#grid-view4").length&&(n=e("#grid-view4").clone(!0)),e("#list-view").length&&(o=e("#list-view").clone(!0)),e("#price-view").length&&(r=e("#price-view").clone(!0)),e("#compact-view").length&&(l=e("#compact-view").clone(!0))},success:function(d){var p=e(f&&void 0!==d.html?d.html:d),u=p;if(u.is(t.ajax.selector)||(u=u.find(t.ajax.selector)),e(t.ajax.selector).find("#"+t.widget_id).length){h=c.detach();u.find("#"+t.widget_id).empty()}else if(e(t.ajax.selector).find("#rdf-dummy").length)var h=e("#rdf-dummy").detach();e(t.ajax.selector).children(":not(.rdf-loader)").remove(),e(t.ajax.selector).append(u.html()),void 0!==h&&(e(t.ajax.selector).find("#"+t.widget_id+", #rdf-dummy").length?e(t.ajax.selector).find("#"+t.widget_id+", #rdf-dummy").replaceWith(h):e(t.ajax.selector).prepend(h)),t.ajax.pagination&&!u.find(t.ajax.pagination).length&&e(t.ajax.pagination).replaceWith(p.find(t.ajax.pagination)),t.ajax.sorter&&!u.find(t.ajax.sorter).length&&e(t.ajax.sorter).replaceWith(p.find(t.ajax.sorter)),t.ajax.limit&&!u.find(t.ajax.limit).length&&e(t.ajax.limit).replaceWith(p.find(t.ajax.limit)),a&&e("#grid-view").replaceWith(a),n&&e("#grid-view4").replaceWith(n),o&&e("#list-view").replaceWith(o),r&&e("#price-view").replaceWith(r),l&&e("#compact-view").replaceWith(l),f&&void 0!==d.filters&&(k(d.filters),b()),t.ajax.pushstate&&s&&history.pushState(null,null,i),y(),t.callbackAfter&&"function"==typeof t.callbackAfter&&t.callbackAfter(p),_()},error:function(e,t,i){console.error("jqXHR",e),console.error("textStatus",t),console.error("errorThrown",i)},complete:function(){setTimeout(function(){e(t.ajax.selector).removeClass("rdf-loading"),"function"==typeof e.fn.button&&d.find(".rdf-footer button").button("reset"),t.ajax.scroll&&e("body,html").animate({scrollTop:t.ajax.offset},500)},300)}})},k=function(i){e.each(t.filters,function(a,n){var o=e("#"+a);if(void 0===i[a]?"hide"===t.disable_null&&o.hide():o.is(":hidden")&&o.show(),n.values){var r="";-1!==["checkbox","multiimage"].indexOf(n.type)&&o.find("input:checked").length&&(r="+"),e.each(n.values,function(n,o){var l=e("#"+n);if(l)if(l.is("option")){var d=l.text().replace(/\(.*\)/gm,"");void 0!==i[a]&&void 0!==i[a].values[n]?(l.prop("disabled",!1),l.is(":hidden")&&l.show(),t.show_count&&l.html(d+"("+r+i[a].values[n]+")")):("disable"!==t.disable_null||l.is(":selected")?"hide"===t.disable_null&&l.hide():l.prop("disabled",!0),t.show_count&&l.html(d))}else{var s=l.find("input[name]");if(void 0!==i[a]&&void 0!==i[a].values[n]){switch(t.disable_null){case"disable":l.fadeTo("fast",1);break;case"hide":l.show()}s.prop("disabled",!1),t.show_count&&l.children(".rdf-label").html(r+i[a].values[n])}else{if(!s.is(":checked")){switch(t.disable_null){case"disable":l.fadeTo("slow",.5);break;case"hide":l.hide()}s.prop("disabled",!0)}t.show_count&&l.children(".rdf-label").html("")}}})}else if(n.range||n.slider){var l=e("#"+n.input_id),d=l.data("ionRangeSlider");if(d&&void 0!==i[a]&&(i[a].range||i[a].slider)){var s,c,f=null!==d.options.from_min?d.options.from_min:d.options.min,p=null!==d.options.to_max?d.options.to_max:d.options.max;if(update={},n.range&&i[a].range){if(s=i[a].range.min,c=i[a].range.max,s!=f&&(update.from_min=s,update.to_min=s,l.val()||(update.from=s)),c!=p&&(update.from_max=c,update.to_max=c,l.val()||(update.to=c)),"slider_entry"===n.type){var u=e("#"+n.input_id+"-min"),h=e("#"+n.input_id+"-max");u.attr({min:s,max:c,placeholder:s}),h.attr({min:s,max:c,placeholder:c}),u.val()&&s>parseFloat(u.val())&&u.val(s),h.val()&&c<parseFloat(h.val())&&h.val(c)}}else n.slider&&i[a].slider&&!l.val()&&(e.each(n.slider,function(e,t){-1!==i[a].slider.indexOf(String(t))&&(s=void 0===s?e:s,c=e)}),void 0!==s&&s!==f&&(update.from_min=s,update.to_min=s,update.from=s),void 0!==c&&c!==p&&(update.from_max=c,update.to_max=c,update.to=c));!l.val()&&d.options.disable&&(update.disable=!1),e.isEmptyObject(update)||(d.update(update),l.val(""))}}})},y=function(){if(d.find(".rdf-picked").html(""),t.show_picked){var i=[];e.each(t.filters,function(t,a){var n=e("#"+t);if(a.values)e.each(n.find("input:checked"),function(t){i.push({id:e(this).attr("data-id"),name:"type_single"===a.type?"":a.title,value:e.trim(e(this).closest("label").text())})}),e.each(n.find("option:selected"),function(n){e(this).val()&&i.push({id:t,name:a.title,value:e.trim(e(this).text().replace(/\(.*\)/gm,""))})});else if(a.input_id){var o=e("#"+a.input_id);if(o&&o.val())if(o.hasClass("irs-hidden-input")){var r=o.data("ionRangeSlider"),l="",d=void 0!==r.options.p_values[r.result.from]?r.options.p_values[r.result.from]:r.result.from_value?r.result.from_value:r.result.from,s=void 0!==r.options.p_values[r.result.to]?r.options.p_values[r.result.to]:r.result.to_value?r.result.to_value:r.result.to;l+=r.options.prefix,l+=d===s?d:d+" &mdash; "+s,l+=r.options.postfix,i.push({id:t,name:a.title,value:l})}else i.push({id:t,name:a.title,value:o.val()})}}),e.each(i,function(e,t){d.find(".rdf-picked").append('<button type="button" data-clear="'+t.id+'" class="btn btn-default btn-xs">'+(t.name?t.name+": ":"")+t.value+"<i>&times;</i></button>")})}};return t.ajax.enable&&(t.ajax.pushstate&&e(window).on("popstate",function(e){j(location.href)}),t.ajax.pagination&&e(document).on("click",t.ajax.pagination+" a[href]",function(t){return t.preventDefault(),j(e(this).attr("href"),!0),!1}),t.ajax.sorter&&("button"===t.ajax.sorter_type?e(document).on("click",t.ajax.sorter+" a[href]",function(t){t.preventDefault();var i=e(this).attr("href"),a=i.match("sort=([A-Za-z.]+)"),n=i.match("order=([A-Z]+)");return d.find('input[name="sort"]').val(a[1]),d.find('input[name="order"]').val(n[1]),j(i,!0),!1}):e(document).on("change",t.ajax.sorter,function(t){t.preventDefault();var i=e(this).val(),a=i.match("sort=([A-Za-z.]+)"),n=i.match("order=([A-Z]+)");d.find('input[name="sort"]').val(a[1]),d.find('input[name="order"]').val(n[1]),j(i,!0)})),t.ajax.limit&&("button"===t.ajax.limit_type?e(document).on("click",t.ajax.limit+" a[href]",function(t){t.preventDefault();var i=e(this).attr("href"),a=i.match("limit=([0-9]+)");return d.find('input[name="limit"]').val(a[1]),j(i,!0),!1}):e(document).on("change",t.ajax.limit,function(t){t.preventDefault();var i=e(this).val(),a=i.match("limit=([0-9]+)");d.find('input[name="limit"]').val(a[1]),j(i,!0)}))),d.addClass("initialized"),t.ajax.enable&&(e(t.ajax.selector).prepend(t.loader),_()),"none"!==t.mobile.mode&&window.matchMedia("(max-width: "+t.mobile.width+"px)").matches&&w(),b(),this}}(jQuery);